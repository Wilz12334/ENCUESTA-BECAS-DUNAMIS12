<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Becario - Fundación Dunamis</title>
    <!-- Incluye Tailwind CSS para un diseño ligero y atractivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Color de fondo */
        }
        .container {
            max-width: 600px;
        }
        .header {
            background-color: #e21b33; /* Rojo institucional */
        }
        /* Color azul más intenso solicitado por el usuario */
        .blue-intenso {
            background-color: #0a2e68;
        }
        .logo-container {
            background-color: #ffc700; /* Amarillo institucional */
            border: 2px solid #e21b33;
        }
        .input-group {
            background-color: #0a2e68; /* Azul intenso para el grupo de inputs */
            color: white;
        }
        .label-text {
            color: #ffc700; /* Amarillo para los puntos */
        }
        .button-primary {
            background-color: #e21b33; /* Rojo para el botón */
            transition: background-color 0.3s;
        }
        .button-primary:hover {
            background-color: #c0162a; /* Rojo más oscuro al pasar el ratón */
        }
        .footer-logo {
            background-color: #ffc700; /* Amarillo para el logo del pie de página */
        }
        /* Estilos para las nuevas secciones de información */
        .info-section {
            background-color: #1a4a9c; /* Azul institucional para las cajas de info */
            color: white;
        }
        .info-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .info-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        .image-placeholder {
            width: 100%;
            height: 200px; /* Tamaño fijo para el placeholder */
            background-color: #1a4a9c;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.75rem;
            margin-top: 1rem;
        }
        /* Nuevo estilo para las imágenes reales */
        .campus-image {
            width: 100%;
            height: auto;
            border-radius: 0.75rem;
            margin-top: 1rem;
        }
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #fff;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="container bg-white rounded-3xl shadow-xl overflow-hidden">
        
        <!-- Header con el título -->
        <div class="header text-white text-center p-6 sm:p-8 rounded-b-3xl">
            <h1 class="text-3xl sm:text-4xl font-bold mb-2">PLAN BECARIO</h1>
            <h2 class="text-2xl sm:text-3xl font-semibold">REQUISITOS Y REGISTRO</h2>
        </div>

        <!-- Contenedor principal del formulario -->
        <div class="p-6 sm:p-8">
            <p class="text-center text-gray-700 mb-6 text-sm sm:text-base">
                Por favor, completa el siguiente formulario para registrar tu interés en el Plan Becario de la Fundación Dunamis.
            </p>

            <!-- Sección de Información Importante (Requisitos de Edad) -->
            <div class="space-y-4 mb-6">
                <div class="info-section p-4 rounded-xl shadow-md flex items-center">
                    <span class="label-text text-3xl font-bold mr-4">•</span>
                    <div class="flex-1">
                        <p class="text-lg font-semibold">GRADOS DISPONIBLES: <span class="text-yellow-400">DESDE TRANSICIÓN HASTA NOVENO</span></p>
                        <p class="text-lg font-semibold">REQUISITOS DE EDAD: <span class="text-yellow-400">DESDE 5 HASTA 17 AÑOS</span></p>
                    </div>
                </div>
            </div>

            <!-- Sección de imágenes de las sedes -->
            <div class="mb-6">
                <h3 class="text-xl font-bold text-center text-gray-800 mb-4">CONOCE NUESTRAS SEDES</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="flex flex-col items-center">
                        <h4 class="font-semibold text-lg text-gray-700 mb-2">OLAYA</h4>
                        <div class="image-placeholder">
                                                    </div>
                    </div>
                    <div class="flex flex-col items-center">
                        <h4 class="font-semibold text-lg text-gray-700 mb-2">POZÓN</h4>
                        <div class="image-placeholder">
                                                    </div>
                    </div>
                    <div class="flex flex-col items-center">
                        <h4 class="font-semibold text-lg text-gray-700 mb-2">VILLA GRANDE</h4>
                        <!-- Se ha corregido la URL de la imagen para que se cargue correctamente -->
                        <img src="http://googleusercontent.com/file_content/1" alt="Sede Villa Grande" class="campus-image">
                    </div>
                    <div class="flex flex-col items-center">
                        <h4 class="font-semibold text-lg text-gray-700 mb-2">CALAMARES</h4>
                        <div class="image-placeholder">
                                                    </div>
                    </div>
                </div>
            </div>

            <form id="scholarshipForm" class="space-y-6">
                <!-- Campo: Nombre Completo -->
                <div class="input-group flex items-center p-4 rounded-xl shadow-md">
                    <span class="label-text text-3xl font-bold mr-4">•</span>
                    <label for="fullName" class="flex-1">
                        <span class="text-lg font-semibold">NOMBRE COMPLETO</span>
                        <input type="text" id="fullName" name="fullName" class="w-full mt-1 p-2 bg-white rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-yellow-400" placeholder="Ingresa tu nombre completo" required>
                    </label>
                </div>

                <!-- Campo: Identificación -->
                <div class="input-group flex items-center p-4 rounded-xl shadow-md">
                    <span class="label-text text-3xl font-bold mr-4">•</span>
                    <label for="identification" class="flex-1">
                        <span class="text-lg font-semibold">IDENTIFICACIÓN</span>
                        <input type="text" id="identification" name="identification" class="w-full mt-1 p-2 bg-white rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-yellow-400" placeholder="Número de identificación" required>
                    </label>
                </div>

                <!-- Campo: ¿Cuenta con SISBEN? -->
                <div class="input-group flex items-center p-4 rounded-xl shadow-md">
                    <span class="label-text text-3xl font-bold mr-4">•</span>
                    <label class="flex-1">
                        <span class="text-lg font-semibold">¿CUENTA CON SISBEN?</span>
                        <div class="mt-2 flex space-x-6 text-white">
                            <label class="inline-flex items-center">
                                <input type="radio" name="sisben" value="si" class="form-radio text-yellow-400 focus:ring-yellow-400" required>
                                <span class="ml-2">Sí</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="sisben" value="no" class="form-radio text-yellow-400 focus:ring-yellow-400">
                                <span class="ml-2">No</span>
                            </label>
                        </div>
                    </label>
                </div>

                <!-- Campo: Sede de Interés -->
                <div class="input-group flex items-center p-4 rounded-xl shadow-md">
                    <span class="label-text text-3xl font-bold mr-4">•</span>
                    <label for="sede" class="flex-1">
                        <span class="text-lg font-semibold">SEDE DE INTERÉS</span>
                        <select id="sede" name="sede" class="w-full mt-1 p-2 bg-white rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-yellow-400" required>
                            <option value="">Seleccione una sede</option>
                            <option value="olaya">Olaya</option>
                            <option value="pozon">Pozón</option>
                            <option value="villa_grande">Villa Grande</option>
                            <option value="calamares">Calamares</option>
                        </select>
                    </label>
                </div>

                <!-- Campo: Ubicación -->
                <div class="input-group flex items-center p-4 rounded-xl shadow-md">
                    <span class="label-text text-3xl font-bold mr-4">•</span>
                    <label for="location" class="flex-1">
                        <span class="text-lg font-semibold">DEBE ESTAR UBICADO EN CARTAGENA</span>
                        <select id="location" name="location" class="w-full mt-1 p-2 bg-white rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-yellow-400" required>
                            <option value="">Seleccione una opción</option>
                            <option value="cartagena">Sí, estoy ubicado en Cartagena</option>
                            <option value="other">No, estoy en otra ciudad</option>
                        </select>
                    </label>
                </div>

                <!-- Campo: Subir Foto -->
                <div class="input-group flex items-center p-4 rounded-xl shadow-md">
                    <span class="label-text text-3xl font-bold mr-4">•</span>
                    <label for="photo" class="flex-1">
                        <span class="text-lg font-semibold">FOTO DE LA PERSONA INTERESADA</span>
                        <input type="file" id="photo" name="photo" accept="image/*" class="w-full mt-1 p-2 bg-white rounded-md text-gray-800 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-yellow-400 file:text-blue-900 hover:file:bg-yellow-500" required>
                    </label>
                </div>

                <!-- Botón de Enviar -->
                <button type="submit" class="button-primary w-full text-white text-xl font-bold py-4 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 flex items-center justify-center">
                    <span id="submitText">ENVIAR DATOS</span>
                    <div id="loadingSpinner" class="hidden loading-spinner ml-2"></div>
                </button>
            </form>

            <!-- Contenedor para el mensaje de éxito o error -->
            <div id="message" class="mt-4 text-center text-sm font-semibold p-3 rounded-lg hidden"></div>

            <!-- Nuevo contenedor para el mensaje del LLM -->
            <div id="geminiMessage" class="mt-6 p-4 rounded-lg bg-blue-100 text-blue-900 shadow-inner hidden">
                <h4 class="font-bold mb-2">Mensaje Generado con ✨</h4>
                <p id="generatedText"></p>
            </div>
        </div>

        <!-- Footer con información de contacto -->
        <div class="blue-intenso p-4 rounded-t-3xl text-white text-center flex flex-col items-center justify-center">
            <span class="font-bold text-lg mb-2">CONTÁCTANOS</span>
            <div class="flex items-center space-x-2">
                <!-- Icono de teléfono -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.373 18 3 13.627 3 8V5a1 1 0 011-1z" />
                </svg>
                <span class="text-xl font-semibold">3106649307</span>
            </div>
            <!-- Logo de la fundación en el footer -->
            <div class="footer-logo rounded-full p-2 mt-4 inline-block">
                <!-- Se podría agregar el logo de la Fundación Dunamis aquí -->
                <span class="font-bold text-red-600">FUNDACIÓN DUNAMIS</span>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('scholarshipForm').addEventListener('submit', async function(event) {
            event.preventDefault(); // Previene el envío del formulario por defecto
            
            const form = event.target;
            const messageDiv = document.getElementById('message');
            const geminiMessageDiv = document.getElementById('geminiMessage');
            const generatedTextDiv = document.getElementById('generatedText');
            const submitButton = form.querySelector('button[type="submit"]');
            const submitText = document.getElementById('submitText');
            const loadingSpinner = document.getElementById('loadingSpinner');

            // Muestra el spinner de carga
            submitText.textContent = 'Enviando...';
            loadingSpinner.classList.remove('hidden');
            submitButton.disabled = true;

            // Simular el envío de datos
            console.log('Datos del formulario:', {
                fullName: form.fullName.value,
                identification: form.identification.value,
                sisben: form.sisben.value,
                sede: form.sede.value,
                location: form.location.value,
                photo: form.photo.files[0] ? form.photo.files[0].name : 'No file selected'
            });

            try {
                // Generar el mensaje de confirmación con el LLM de Gemini
                const userFullName = form.fullName.value;
                const userSede = form.sede.options[form.sede.selectedIndex].text;
                const prompt = `Genera un mensaje de agradecimiento corto y profesional en español para una persona llamada ${userFullName} que ha enviado su información para el Plan Becario de la Fundación Dunamis. Menciona que eligió la sede de ${userSede} y explica que el equipo revisará sus datos y se pondrá en contacto pronto para continuar con el proceso. El mensaje debe ser cálido y motivador.`;
                
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = ""
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API call failed with status: ${response.status}`);
                }
                
                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    generatedTextDiv.textContent = text;
                    geminiMessageDiv.classList.remove('hidden');
                } else {
                    generatedTextDiv.textContent = "Error al generar el mensaje. Por favor, inténtalo de nuevo.";
                    geminiMessageDiv.classList.remove('hidden');
                }

            } catch (error) {
                console.error('Error al llamar a la API de Gemini:', error);
                generatedTextDiv.textContent = 'Hubo un error al generar la respuesta. Por favor, inténtalo de nuevo más tarde.';
                geminiMessageDiv.classList.remove('hidden');
            } finally {
                // Oculta el spinner y restaura el botón
                submitText.textContent = 'ENVIAR DATOS';
                loadingSpinner.classList.add('hidden');
                submitButton.disabled = false;
            }

            // Mostrar mensaje de éxito
            messageDiv.textContent = '¡Gracias! Tus datos han sido enviados con éxito.';
            messageDiv.className = 'mt-4 text-center text-sm font-semibold p-3 rounded-lg bg-green-200 text-green-800 block';
            
            // Opcional: limpiar el formulario después del envío
            form.reset();
        });
    </script>

</body>
</html>
